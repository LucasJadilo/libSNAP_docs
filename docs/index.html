<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libSNAP: libSNAP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libSNAP<span id="projectnumber">&#160;v1.0.0</span>
   </div>
   <div id="projectbrief">Open source C/C++ library for the Scaleable Node Address Protocol (SNAP)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">libSNAP </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a> <b>libSNAP</b> is an open source C/C++ library that implements most features of the <b>Scaleable Node Address Protocol (SNAP)</b>.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
What is SNAP?</h1>
<p >SNAP is a free, simple and generic network protocol designed by the Swedish company <b>High Tech Horizon (HTH)</b> to be used originally with their Power Line Modem PLM-24.</p>
<p >The goal was to have a scalable protocol that could be easily implemented in small microcontrollers with very limited computing and memory resources, but also could be used in larger systems. SNAP supports different packet lengths and different protocol complexity. Since SNAP is scalable, both simple (cheap) and sophisticated nodes can communicate with each other in the network.</p>
<p ><b>Protocol features:</b></p><ul>
<li>Easy to learn, use and implement;</li>
<li>Free and open network protocol;</li>
<li>Up to 16.7 million node addresses;</li>
<li>Up to 24 protocol specific flags;</li>
<li>Optional ACK/NAK request;</li>
<li>Optional command mode;</li>
<li>8 different error detection methods (Checksum, CRC, FEC, etc);</li>
<li>Can be used in master/slave and/or peer-to-peer;</li>
<li>Supports broadcast messages;</li>
<li>Media independent (RF, RS-485, PLC, IR, Inter IC, etc);</li>
<li>Works with simplex, half-duplex and full-duplex links;</li>
<li>Header is scalable from 3 to 12 bytes;</li>
<li>User-specified number of preamble bytes;</li>
<li>Works with synchronous and asynchronous communication.</li>
</ul>
<p >The homepage of the protocol is <a href="http://www.hth.com/snap/">http://www.hth.com/snap/</a>. Unfortunately, the website has been down for a long time. Hence, there is no official source online for the protocol. Fortunately, you can find a copy of the last revision of the protocol specification in this repository (folder <code>doc/</code>).</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Library features</h1>
<p >This library is designed to be portable and fairly lightweight, suitable for most architectures, including 8-bit microcontrollers. The table below shows the resulting object file size when compiling the library for the following architectures: 8-bit AVR, 16-bit MSP430, 32-bit ARM Cortex-M0, and x86_64 (Windows).</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Compiler   </th><th class="markdownTableHeadCenter">Version   </th><th class="markdownTableHeadCenter">Command line   </th><th class="markdownTableHeadCenter">Object size (bytes)    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">avr-gcc   </td><td class="markdownTableBodyCenter">7.3.0   </td><td class="markdownTableBodyCenter"><code>avr-gcc -mmcu=atmega328p -c -O2 <a class="el" href="snap_8c.html" title="Source file of the libSNAP library. Refer to the library documentation for details.">snap.c</a></code>   </td><td class="markdownTableBodyCenter">6.976    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">msp430-elf-gcc   </td><td class="markdownTableBodyCenter">9.3.1   </td><td class="markdownTableBodyCenter"><code>msp430-elf-gcc -mmcu=msp430fr5969 -c -O2 <a class="el" href="snap_8c.html" title="Source file of the libSNAP library. Refer to the library documentation for details.">snap.c</a></code>   </td><td class="markdownTableBodyCenter">8.592    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">arm-none-eabi-gcc   </td><td class="markdownTableBodyCenter">10.3.1   </td><td class="markdownTableBodyCenter"><code>arm-none-eabi-gcc -mcpu=cortex-m0 -c -O2 <a class="el" href="snap_8c.html" title="Source file of the libSNAP library. Refer to the library documentation for details.">snap.c</a></code>   </td><td class="markdownTableBodyCenter">4.016    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">gcc (MinGW-W64)   </td><td class="markdownTableBodyCenter">12.2.0   </td><td class="markdownTableBodyCenter"><code>gcc -c -O2 <a class="el" href="snap_8c.html" title="Source file of the libSNAP library. Refer to the library documentation for details.">snap.c</a></code>   </td><td class="markdownTableBodyCenter">6.358   </td></tr>
</table>
<p >This library supports most of the frame formats described in the protocol specification, including:</p><ul>
<li>All the destination address sizes (up to 3 bytes);</li>
<li>All the source address sizes (up to 3 bytes);</li>
<li>Any number of protocol specific flags (up to 24 bits);</li>
<li>All the payload sizes (up to 512 bytes);</li>
<li>Most of the error detection methods: 8-bit checksum, 8-bit CRC, 16-bit CRC, 32-bit CRC, and a user-defined hash function.</li>
</ul>
<p >Each CRC function can be individually configured at compilation time to maximize performance or minimize memory usage. If the macro <code>SNAP_CRC8_TABLE</code> is defined (by command line), the 8-bit CRC algorithm will use a lookup table to speed up the calculation, thus using more memory. The same logic applies to macros <code>SNAP_CRC16_TABLE</code> and <code>SNAP_CRC32_TABLE</code> regarding 16-bit CRC and 32-bit CRC algorithms, respectively.</p>
<p >There is no hardware-related code (e.g. serial port handling, etc). Frame transmission and reception through serial ports must be handled outside the library.</p>
<p >The library provides functions for frame decoding, encapsulation, and decapsulation. The format of the frame is selected automatically based on the header bytes.</p>
<p >Despite the efforts to cover all the protocol features, the library has some limitations:</p><ul>
<li>Preamble detection is not supported. All bytes received before the sync byte will be ignored.</li>
<li>The <b>user-specified NDB</b> (NDB = 15) is not supported. It produces the same result as NDB = 0.</li>
<li>The only error detection methods supported are those that append a hash value into the frame, like the checksum/CRC options. The other methods will produce the same result as EDM = 0.<ul>
<li>The method <b>3 times re-transmission</b> (EDM = 1) should be handled outside the library, probably closer to the hardware layer.</li>
<li>The method <b>FEC</b> (EDM = 6) is not supported by the library because it is not completely defined in the protocol specification.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
How to use</h1>
<p >The library consists of only a header file (<code><a class="el" href="snap_8h.html" title="Header file of the libSNAP library. Refer to the library documentation for details.">src/snap.h</a></code>) and a source file (<code><a class="el" href="snap_8c.html" title="Source file of the libSNAP library. Refer to the library documentation for details.">src/snap.c</a></code>). To use it in your projects, you must include the header file in the sources that will need it, and compile the library source file along with your other sources.</p>
<p >There are some code examples in the folder <code>src/examples/</code> that demonstrate the main features of the library:</p><ul>
<li>Example 1: Frame encapsulation;</li>
<li>Example 2: Frame decoding and decapsulation;</li>
<li>Example 3: User-defined hash function (CRC-24/OPENPGP);</li>
<li>Example 4: Function-like macros.</li>
</ul>
<p >Every function of the library was tested using the <a href="https://github.com/ThrowTheSwitch/Unity">Unity</a> framework. You can find all the test cases in <code>test/test_snap.c</code>.</p>
<p >This project has only one <code>makefile</code>, which can be used to build and run all the examples and unit tests. It is necessary to have <b>GNU Make</b> and <b>GCC</b> installed. Upon compilation, the folder <code>build/</code> will be created with all the object files and executables. The available commands are listed below:</p><ul>
<li><code>make all</code>: Builds all the examples and unit tests;</li>
<li><code>make clean</code>: Deletes the folder <code>build/</code> and everything in it;</li>
<li><code>make test</code>: Builds and runs the unit tests;</li>
<li><code>make exampleN</code>: Builds and runs the code example <em>N</em> (e.g. <code>make example1</code> runs the code example 1);</li>
<li><code>make doc</code>: Builds the whole HTML documentation of the library (requires <b>Doxygen</b> and <b>Graphviz</b> installed);</li>
<li><code>make open-doc</code>: Opens the HTML documentation on the browser;</li>
<li><code>make clean-doc</code>: Delete the HTML documentation. </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
